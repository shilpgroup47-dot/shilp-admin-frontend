import{a as t}from"./chunk-ClPlP9YV.js";import"./chunk-CZKhe9Qd.js";const e=t=>{if(!t)return"";return`https://admin.shilpgroup.com${t.startsWith("/")?t:`/${t}`}`},a={BASE_URL:"https://backend.shilpgroup.com",ENDPOINTS:{ADMIN:{LOGIN:"/api/admin/login",VERIFY_TOKEN:"/api/admin/verify-token",FORGOT_PASSWORD:"/api/admin/forgot-password",PROFILE:"/api/admin/profile"}},TIMEOUT:1e4};class r extends Error{status;code;constructor(t,e,a){super(t),this.name="ApiError",this.status=e,this.code=a}}const o={async request(e,o={}){const s=`${a.BASE_URL}${e}`,n={"Content-Type":"application/json",...Object.fromEntries(Object.entries(o.headers||{}).map(([t,e])=>[t,e??""]))},i=localStorage.getItem("adminToken");i&&(n.Authorization=`Bearer ${i}`);try{const e={url:s,method:o.method,headers:n,data:o.data,timeout:a.TIMEOUT},i=await t.request(e);if(!i.data.success)throw new r(i.data.error?.message||i.data.message||"Request failed",i.status,i.data.error?.code);return i.data}catch(d){if(d instanceof r)throw d;if(t.isAxiosError(d)){if("ECONNABORTED"===d.code)throw new r("Request timeout",408,"TIMEOUT");throw new r(d.response?.data?.error?.message||d.message||"Network error",d.response?.status||0,d.response?.data?.error?.code||"NETWORK_ERROR")}throw new r("Network error",0,"NETWORK_ERROR")}},get(t){return this.request(t,{method:"GET"})},post(t,e){return this.request(t,{method:"POST",data:e})},put(t,e){return this.request(t,{method:"PUT",data:e})},delete(t){return this.request(t,{method:"DELETE"})}},s=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminData")},n={login:async t=>{try{const e=await o.post(a.ENDPOINTS.ADMIN.LOGIN,t);if(e.success&&e.data)return localStorage.setItem("adminToken",e.data.token),localStorage.setItem("adminData",JSON.stringify(e.data.admin)),e.data;throw new r(e.error?.message||"Login failed",400,e.error?.code)}catch(e){if(e instanceof r)throw e;throw new r("Login request failed",500,"LOGIN_ERROR")}},verifyToken:async()=>{try{const t=localStorage.getItem("adminToken");if(!t)throw new r("No token found",401,"NO_TOKEN");const e=await o.post(a.ENDPOINTS.ADMIN.VERIFY_TOKEN,{token:t});if(e.success&&e.data)return e.data;throw new r(e.error?.message||"Token verification failed",401,e.error?.code)}catch(t){if(s(),t instanceof r)throw t;throw new r("Token verification failed",500,"TOKEN_ERROR")}},getProfile:async()=>{try{const t=await o.get(a.ENDPOINTS.ADMIN.PROFILE);if(t.success&&t.data)return localStorage.setItem("adminData",JSON.stringify(t.data)),t.data;throw new r(t.error?.message||"Failed to fetch profile",400,t.error?.code)}catch(t){if(t instanceof r)throw t;throw new r("Profile request failed",500,"PROFILE_ERROR")}},forgotPassword:async t=>{try{const e=await o.post(a.ENDPOINTS.ADMIN.FORGOT_PASSWORD,{email:t});if(e.success&&e.data)return e.data;throw new r(e.error?.message||"Failed to send reset email",400,e.error?.code)}catch(e){if(e instanceof r)throw e;throw new r("Forgot password request failed",500,"FORGOT_PASSWORD_ERROR")}},logout:s,isLoggedIn:()=>{const t=localStorage.getItem("adminToken"),e=localStorage.getItem("adminData");return!(!t||!e)},getStoredAdminData:()=>{try{const t=localStorage.getItem("adminData");return t?JSON.parse(t):null}catch(t){return console.error("Error parsing admin data:",t),null}},getStoredToken:()=>localStorage.getItem("adminToken")},i=t.create({baseURL:a.BASE_URL,timeout:a.TIMEOUT});i.interceptors.request.use(t=>{const e=localStorage.getItem("adminToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t});const d=async()=>{try{return(await i.get("/api/banners")).data}catch(t){console.error("âŒ Banner API request failed:",t);const e=t instanceof Error?t.message:t?.response?.data?.message;throw new Error(e||"Failed to fetch banners")}},c=async(t,e,a,r)=>{try{const o=new FormData;o.append("image",a),r&&o.append("alt",r);return(await i.post(`/api/banners/${t}/${e}`,o,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){const t=o instanceof Error?o.message:o?.response?.data?.message;throw new Error(t||"Failed to upload banner image")}},p=async(t,e)=>{try{return(await i.put(`/api/banners/${t}/alt`,{alt:e})).data}catch(a){const t=a instanceof Error?a.message:a?.response?.data?.message;throw new Error(t||"Failed to update alt text")}},l=async(t,e)=>{try{return(await i.put("/api/banners/blogsDetail/text",{title:t,description:e})).data}catch(a){const t=a instanceof Error?a.message:a?.response?.data?.message;throw new Error(t||"Failed to update blogs text")}},u=async(t,e)=>{try{return(await i.delete(`/api/banners/${t}/${e}`)).data}catch(a){const t=a instanceof Error?a.message:a?.response?.data?.message;throw new Error(t||"Failed to delete banner image")}},m=t.create({baseURL:a.BASE_URL,timeout:a.TIMEOUT});m.interceptors.request.use(t=>{const e=localStorage.getItem("adminToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t});const g={async createBlog(t,e){const a=new FormData;a.append("title",t.title),a.append("description",t.description),a.append("publish",t.publish||"By Shilp Group"),a.append("date",t.date),a.append("url",t.url),a.append("alt",t.alt||""),a.append("status",t.status||"draft"),a.append("points",JSON.stringify(t.points)),e.mainImage&&a.append("image",e.mainImage),e.pointImages&&Object.entries(e.pointImages).forEach(([t,e])=>{a.append(`point_${t}_image`,e)});return(await m.post("/api/blogs",a,{headers:{"Content-Type":"multipart/form-data"}})).data.data},async getAllBlogs(t){const e=t?{status:t}:{};return(await m.get("/api/blogs",{params:e})).data.data},getBlogById:async t=>(await m.get(`/api/blogs/${t}`)).data.data,getBlogByUrl:async t=>(await m.get(`/api/blogs/url/${t}`)).data.data,async updateBlog(t,e,a){const r=new FormData;e.title&&r.append("title",e.title),e.description&&r.append("description",e.description),e.publish&&r.append("publish",e.publish),e.date&&r.append("date",e.date),e.url&&r.append("url",e.url),void 0!==e.alt&&r.append("alt",e.alt),e.status&&r.append("status",e.status),e.points&&r.append("points",JSON.stringify(e.points)),a?.mainImage&&r.append("image",a.mainImage),a?.pointImages&&Object.entries(a.pointImages).forEach(([t,e])=>{r.append(`point_${t}_image`,e)});return(await m.put(`/api/blogs/${t}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data.data},async deleteBlog(t){await m.delete(`/api/blogs/${t}`)}},h=(t,e=!0)=>{if(!t||""===t.trim())return"";const a="https://mail.shilpgroup.com";let r="";if(r=t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/uploads/")?`${a}${t}`:t.startsWith("uploads/")?`${a}/${t}`:t.includes("/")?`${a}/${t.startsWith("/")?t.substring(1):t}`:`${a}/uploads/banners/${t}`,e&&r){const t=r.includes("?")?"&":"?";r+=`${t}t=${Date.now()}`}return r},w=t=>{if(0===t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,e)).toFixed(1))} ${["B","KB","MB","GB"][e]}`},f=t=>{if(!t)return"Unknown";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},E={formatError:t=>t instanceof r||t instanceof Error?t.message:"An unexpected error occurred",isNetworkError:t=>t instanceof r&&("NETWORK_ERROR"===t.code||0===t.status),isAuthError:t=>t instanceof r&&(401===t.status||"TOKEN_ERROR"===t.code),isTimeoutError:t=>t instanceof r&&"TIMEOUT"===t.code};export{n as A,E as a,d as b,l as c,f as d,u as e,w as f,h as g,p as h,a as i,g as j,e as k,c as u};
