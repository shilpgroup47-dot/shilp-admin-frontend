import{j as e}from"./chunk-uF_e8af6.js";import{u as t,r as s,N as r,a as n,L as a}from"./chunk-DkyOUQ6A.js";import{A as i,a as l}from"./chunk-jIxR8NGL.js";import"./chunk-Boel6EIc.js";import{a as o,X as d}from"./chunk-Ci71oLUO.js";const c="/",m={LOGIN:"/login",DASHBOARD:"/admin"};class h{static isAdminRoute(e){return e!==m.LOGIN}static getPostLoginRedirect(e){return e&&e!==m.LOGIN?e:m.DASHBOARD}static getLoginPath(e){return e&&this.isAdminRoute(e),m.LOGIN}static getHomePath(){return c}static requiresAuth(e){return[m.DASHBOARD].includes(e)}static isLoginRoute(e){return[m.LOGIN].includes(e)}}const x=({children:n,requireAuth:a=!1,redirectIfAuthenticated:l=!1})=>{const o=t(),[d,c]=s.useState(!0),[x,u]=s.useState(!1);if(s.useEffect(()=>{(async()=>{try{if(i.isLoggedIn())if("/login"!==o.pathname)try{await i.verifyToken(),u(!0)}catch(e){console.error("Token verification failed:",e),i.logout(),u(!1)}else u(!0);else u(!1)}catch(e){console.error("Admin auth check failed:",e),i.logout(),u(!1)}finally{c(!1)}})()},[o.pathname]),d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-linear-to-br from-orange-50 to-red-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Admin Panel..."})]})});if(a&&!x)return e.jsx(r,{to:m.LOGIN,state:{from:o},replace:!0});if(l&&x){const t=o.state?.from?.pathname,s=h.getPostLoginRedirect(t);return e.jsx(r,{to:s,replace:!0})}return e.jsx(e.Fragment,{children:n})},u=()=>{const[e,t]=s.useState({isAuthenticated:!1,isLoading:!0,adminData:null,error:null});s.useEffect(()=>{(async()=>{try{if(i.isLoggedIn()){const s=i.getStoredAdminData();try{await i.verifyToken()}catch(e){}t(e=>({...e,isAuthenticated:!0,adminData:s,isLoading:!1,error:null}))}else t(e=>({...e,isAuthenticated:!1,adminData:null,isLoading:!1,error:null}))}catch(e){console.error("Auth initialization failed:",e),i.logout(),t(t=>({...t,isAuthenticated:!1,adminData:null,isLoading:!1,error:l.formatError(e)}))}})()},[]);const r=s.useCallback(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{const s=await i.login(e);t(e=>({...e,isAuthenticated:!0,adminData:s.admin,isLoading:!1,error:null}))}catch(s){throw t(e=>({...e,isAuthenticated:!1,adminData:null,isLoading:!1,error:l.formatError(s)})),s}},[]),n=s.useCallback(()=>{i.logout(),t(e=>({...e,isAuthenticated:!1,adminData:null,error:null}))},[]),a=s.useCallback(async()=>{try{return await i.verifyToken(),!0}catch(e){return console.error("Token verification failed:",e),n(),!1}},[n]),o=s.useCallback(()=>{t(e=>({...e,error:null}))},[]);return{...e,login:r,logout:n,verifyToken:a,clearError:o}},f=[{name:"Banner Page",href:"/admin",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v2m0 0h14m-14 0v2m0-2V7a2 2 0 012-2h14a2 2 0 012 2v2"})})},{name:"Projects",href:"/admin/projects",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{name:"Plots",href:"/admin/projects/plots",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4h16v16H4z"})})},{name:"Commercial",href:"/admin/projects/commercial",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7H3z"})})},{name:"Residential",href:"/admin/projects/residential",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l9-9 9 9M4 10v10h16V10"})})},{name:"Project Tree",href:"/admin/project-tree",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})},{name:"Blogs",href:"/admin/blogs",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}],g=({mobileMenuOpen:t,onClose:r})=>{const{adminData:i,logout:l}=u(),o=n(),[d,c]=s.useState([]),h="undefined"!=typeof window?window.location.pathname:"";return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden backdrop-blur-sm transition-opacity duration-300",onClick:r}),e.jsxs("div",{className:`\n        fixed top-0 left-0 h-screen w-72 bg-slate-900 z-50 flex flex-col\n        transition-transform duration-300 ease-in-out\n        shadow-2xl border-r border-slate-700\n        lg:translate-x-0\n        ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}\n      `,children:[e.jsxs("div",{className:"h-16 px-4 border-b border-slate-700 bg-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"S"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h1",{className:"text-white text-lg font-bold",children:"Shilp Admin"}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Control Panel"})]})]}),e.jsx("button",{onClick:r,className:"lg:hidden p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-md transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 border-b border-slate-700 bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-lg",children:i?.username?.charAt(0).toUpperCase()||"A"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:i?.username||"Admin User"}),e.jsx("p",{className:"text-slate-400 text-xs",children:i?.role||"Administrator"})]}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:f.map(s=>{const n=s.href===h,i=s.children&&s.children.length>0,l=d.includes(s.name);return i?e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>{return e=s.name,void c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},className:`\n                      w-full flex items-center p-3 rounded-lg text-sm font-medium\n                      transition-colors duration-200\n                      ${n?"bg-blue-500 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"}\n                    `,children:[e.jsx("span",{className:"flex items-center",children:s.icon}),e.jsx("span",{className:"ml-3 flex-1 text-left",children:s.name}),e.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(l?"rotate-90":"rotate-0"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),l&&s.children&&e.jsx("div",{className:"ml-6 mt-2 space-y-1",children:s.children.map(s=>e.jsx(a,{to:s.href,className:`\n                            block py-2 px-3 rounded-md text-sm transition-colors duration-200\n                            ${s.href===h?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-700 hover:text-white"}\n                          `,onClick:()=>{window.innerWidth<1024&&t&&r()},children:s.name},s.name))})]},s.name):e.jsxs(a,{to:s.href,className:`\n                  flex items-center p-3 mb-2 rounded-lg text-sm font-medium\n                  transition-colors duration-200\n                  ${n?"bg-blue-500 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"}\n                `,onClick:()=>{window.innerWidth<1024&&t&&r()},children:[e.jsx("span",{className:"flex items-center",children:s.icon}),e.jsx("span",{className:"ml-3",children:s.name})]},s.name)})}),e.jsx("div",{className:"p-4 border-t border-slate-700 bg-slate-800",children:e.jsxs("button",{onClick:()=>{l(),o(m.LOGIN)},className:"w-full flex items-center p-3 rounded-lg text-sm font-medium text-slate-300 hover:bg-red-600 hover:text-white transition-colors duration-200",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{className:"ml-3",children:"Logout"})]})})]})]})},b=({children:t,title:r="Admin Dashboard"})=>{const[n,a]=s.useState(!1),{adminData:i}=u();return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(g,{isOpen:!0,mobileMenuOpen:n,onClose:()=>a(!1),onToggle:()=>{}}),e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-72 transition-all duration-300 ease-in-out min-h-screen",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 sticky top-0 z-30",children:[e.jsxs("div",{className:"flex items-center relative",children:[e.jsx("button",{onClick:()=>{a(!n)},className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 lg:ml-0 ml-3",children:r})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden md:block relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("button",{className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors relative",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a4 4 0 00-8 0v3l-5 5h5a2 2 0 104 0z"})}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:i?.username?.charAt(0).toUpperCase()||"A"})]})]}),e.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:t})]})]})},p=({isOpen:t,title:r,message:n,details:a,onClose:i})=>{if(s.useEffect(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm animate-fadeIn",onClick:i,children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full transform transition-all animate-slideUp",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center pt-8 pb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-100 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"relative bg-linear-to-br from-blue-500 to-blue-600 rounded-full p-4 shadow-lg",children:e.jsx(o,{className:"w-12 h-12 text-white",strokeWidth:2.5})})]})}),e.jsxs("div",{className:"text-center px-8 py-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:r}),e.jsx("p",{className:"text-gray-600 text-base leading-relaxed",children:n})]}),a&&e.jsx("div",{className:"px-8 pb-6",children:e.jsxs("div",{className:"bg-linear-to-br from-blue-50 to-white border-2 border-blue-100 rounded-xl p-5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-3 uppercase tracking-wide flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-4 bg-blue-600 rounded-full"}),"Details"]}),e.jsxs("div",{className:"space-y-2.5",children:[a.section&&e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-blue-100 last:border-0",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Section:"}),e.jsx("span",{className:"text-sm text-blue-700 font-medium bg-blue-50 px-3 py-1 rounded-lg",children:a.section})]}),a.field&&e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-blue-100 last:border-0",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Field:"}),e.jsx("span",{className:"text-sm text-blue-700 font-medium bg-blue-50 px-3 py-1 rounded-lg",children:"banner"===a.field?"Desktop Banner":"Mobile Banner"})]}),a.imageUrl&&e.jsxs("div",{className:"flex items-start justify-between py-1.5 border-b border-blue-100 last:border-0",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Image URL:"}),e.jsx("span",{className:"text-sm text-blue-600 truncate max-w-64 text-right",title:a.imageUrl,children:a.imageUrl})]}),a.metadata?.originalName&&e.jsxs("div",{className:"flex items-start justify-between py-1.5 border-b border-blue-100 last:border-0",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Original Name:"}),e.jsx("span",{className:"text-sm text-blue-600 truncate max-w-64 text-right",title:a.metadata.originalName,children:a.metadata.originalName})]}),a.metadata?.size&&e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-blue-100 last:border-0",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"File Size:"}),e.jsx("span",{className:"text-sm text-blue-700 font-medium bg-blue-50 px-3 py-1 rounded-lg",children:(e=>{if(!e)return"Unknown size";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(a.metadata.size)})]}),a.metadata?.filename&&e.jsxs("div",{className:"flex items-start justify-between py-1.5",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Saved As:"}),e.jsx("span",{className:"text-sm text-blue-600 truncate max-w-64 text-right",title:a.metadata.filename,children:a.metadata.filename})]})]})]})}),e.jsx("div",{className:"flex gap-3 px-8 pb-8 pt-2",children:e.jsx("button",{onClick:i,className:"flex-1 px-6 py-3 bg-linear-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Got it, Thanks!"})}),e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2 transition-all duration-200","aria-label":"Close modal",children:e.jsx(d,{className:"w-5 h-5"})})]}),e.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        \n        @keyframes slideUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px) scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.2s ease-out;\n        }\n        \n        .animate-slideUp {\n          animation: slideUp 0.3s ease-out;\n        }\n      "})]})},j=({isOpen:t,onClose:r,message:n,type:a="info",duration:i=3e3})=>{if(s.useEffect(()=>{if(t&&i>0){const e=setTimeout(()=>{r()},i);return()=>clearTimeout(e)}},[t,i,r]),!t)return null;return e.jsx("div",{className:"fixed top-4 right-4 z-60 animate-slide-in-right",children:e.jsxs("div",{className:`${(()=>{switch(a){case"success":return"bg-green-600 border-green-700";case"error":return"bg-red-600 border-red-700";case"warning":return"bg-yellow-600 border-yellow-700";case"info":return"bg-blue-600 border-blue-700";default:return"bg-gray-600 border-gray-700"}})()} text-white px-6 py-4 rounded-xl shadow-2xl border-2 flex items-center gap-3 min-w-[300px] max-w-md`,children:[e.jsx("div",{className:"shrink-0",children:(()=>{switch(a){case"success":return e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}})()}),e.jsx("p",{className:"flex-1 font-medium",children:n}),e.jsx("button",{onClick:r,className:"shrink-0 hover:bg-white/20 rounded-lg p-1 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})};export{b as L,x as R,p as S,j as T,u};
